<tr id="user-{{.UserRow.ID}}">
    <td class="px-4 py-3 whitespace-nowrap">
        <div class="flex items-center gap-3">
            {{if .UserRow.Picture}}
            <img src="{{.UserRow.Picture}}" alt="" class="w-8 h-8 rounded-full">
            {{else}}
            <div class="w-8 h-8 rounded-full bg-brand-100 dark:bg-brand-900 flex items-center justify-center">
                <span class="text-sm font-medium text-brand-600 dark:text-brand-400">
                    {{if .UserRow.Name}}{{slice .UserRow.Name 0 1}}{{else}}?{{end}}
                </span>
            </div>
            {{end}}
            <div>
                <div class="font-medium text-gray-900 dark:text-white">{{.UserRow.Name}}</div>
                {{if .UserRow.Username}}
                <div class="text-xs text-gray-500 dark:text-gray-400">@{{.UserRow.Username}}</div>
                {{end}}
            </div>
        </div>
    </td>
    <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
        {{.UserRow.Email}}
    </td>
    <td class="px-4 py-3 whitespace-nowrap">
        <select
            hx-post="/admin/users/{{.UserRow.ID}}/org"
            hx-target="#user-{{.UserRow.ID}}"
            hx-swap="outerHTML"
            name="organization_id"
            class="appearance-none text-sm pl-3 pr-8 py-1.5 rounded-lg border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white hover:border-gray-300 dark:hover:border-gray-500 focus:outline-none focus:ring-2 focus:ring-brand-500/50 focus:border-brand-500 cursor-pointer transition-colors"
            style="background-image: url('data:image/svg+xml;charset=UTF-8,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 24 24%27 fill=%27none%27 stroke=%27%236b7280%27 stroke-width=%272%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27%3e%3cpolyline points=%276 9 12 15 18 9%27%3e%3c/polyline%3e%3c/svg%3e'); background-repeat: no-repeat; background-position: right 0.5rem center; background-size: 1em;">
            <option value="none" {{if not .UserRow.OrganizationID}}selected{{end}}>No Organization</option>
            {{range .Orgs}}
            <option value="{{.ID}}" {{if and $.UserRow.OrganizationID (eq $.UserRow.OrganizationID.String .ID.String)}}selected{{end}}>{{.Name}}</option>
            {{end}}
        </select>
    </td>
    <td class="px-4 py-3 whitespace-nowrap">
        <select
            hx-post="/admin/users/{{.UserRow.ID}}/role"
            hx-target="#user-{{.UserRow.ID}}"
            hx-swap="outerHTML"
            name="role"
            class="appearance-none text-sm pl-3 pr-8 py-1.5 rounded-lg border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white hover:border-gray-300 dark:hover:border-gray-500 focus:outline-none focus:ring-2 focus:ring-brand-500/50 focus:border-brand-500 cursor-pointer transition-colors"
            style="background-image: url('data:image/svg+xml;charset=UTF-8,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 24 24%27 fill=%27none%27 stroke=%27%236b7280%27 stroke-width=%272%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27%3e%3cpolyline points=%276 9 12 15 18 9%27%3e%3c/polyline%3e%3c/svg%3e'); background-repeat: no-repeat; background-position: right 0.5rem center; background-size: 1em;">
            {{range .Roles}}
            <option value="{{.}}" {{if eq $.UserRow.Role .}}selected{{end}}>{{.}}</option>
            {{end}}
        </select>
    </td>
    <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
        {{.UserRow.CreatedAt.Format "Jan 2, 2006"}}
    </td>
    <td class="px-4 py-3 whitespace-nowrap">
        {{if and .CurrentUser (ne .UserRow.ID .CurrentUser.ID)}}
        <button
            hx-delete="/admin/users/{{.UserRow.ID}}"
            hx-target="#user-{{.UserRow.ID}}"
            hx-swap="outerHTML"
            hx-confirm="Are you sure you want to delete this user? This action cannot be undone."
            class="inline-flex items-center px-2.5 py-1 rounded-lg text-sm font-medium text-red-600 hover:text-red-700 bg-red-50 hover:bg-red-100 dark:text-red-400 dark:hover:text-red-300 dark:bg-red-900/20 dark:hover:bg-red-900/30 transition-colors">
            Delete
        </button>
        {{else}}
        <span class="text-gray-400 dark:text-gray-500 text-sm">â€”</span>
        {{end}}
    </td>
</tr>
