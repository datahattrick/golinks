<div id="fallback-preference" class="glass-card rounded-2xl p-6 mb-8">
    <h2 class="text-lg font-semibold mb-1 text-gray-900 dark:text-white">Preferences</h2>
    <p class="text-xs text-gray-500 dark:text-gray-400 mb-4">When a keyword is not found, redirect to another service instead of showing a 404 page.</p>

    <label class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block">Fallback Redirect</label>
    <div class="space-y-2">
        <!-- None option -->
        <label class="flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-colors
            {{if not .User.FallbackRedirectID}}border-brand-500 bg-brand-50/50 dark:bg-brand-900/20{{else}}border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600{{end}}">
            <input type="radio" name="fallback_redirect_id" value="none"
                {{if not .User.FallbackRedirectID}}checked{{end}}
                hx-patch="/profile/fallback"
                hx-target="#fallback-preference"
                hx-swap="outerHTML"
                class="text-brand-500 focus:ring-brand-500">
            <div>
                <div class="text-sm font-medium text-gray-900 dark:text-white">None</div>
                <div class="text-xs text-gray-500 dark:text-gray-400">Show the "Not Found" page</div>
            </div>
        </label>

        {{range .FallbackOptions}}
        <label class="flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-colors
            {{if and $.User.FallbackRedirectID (eq $.User.FallbackRedirectID.String .ID.String)}}border-brand-500 bg-brand-50/50 dark:bg-brand-900/20{{else}}border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600{{end}}">
            <input type="radio" name="fallback_redirect_id" value="{{.ID}}"
                {{if and $.User.FallbackRedirectID (eq $.User.FallbackRedirectID.String .ID.String)}}checked{{end}}
                hx-patch="/profile/fallback"
                hx-target="#fallback-preference"
                hx-swap="outerHTML"
                class="text-brand-500 focus:ring-brand-500">
            <div class="min-w-0">
                <div class="text-sm font-medium text-gray-900 dark:text-white">{{.Name}}</div>
                <div class="text-xs text-gray-500 dark:text-gray-400 truncate font-mono">{{.URL}}</div>
            </div>
        </label>
        {{end}}
    </div>

    {{if .SavedMessage}}
    <div class="mt-3 text-sm text-green-600 dark:text-green-400 animate-pulse">Preference saved.</div>
    {{end}}
</div>
